import{u as p,r as k,j as t,s as u,h as w}from"./app-Cp7VRKzo.js";import{s as _}from"./students-thunk-Diw8Z2-D.js";import{g as y}from"./app-thunk-yirK_uPJ.js";import{C as N,a as A}from"./CardContent-DQIjST6_.js";import{T as B}from"./Typography-BuD7p4rX.js";import{C as q,a as L}from"./CardMedia-DT-0iLAy.js";import{F as R}from"./FormControl-qgrfvipT.js";import{R as S,a as m,b as c}from"./RadioGroup-K9a8eii4.js";import{B as D}from"./Button-Dv0uzKbS.js";import"./user-service-Cs8EOpN7.js";import"./identifier-Bomhy8dA.js";import"./DefaultPropsProvider--ZVDbTJ2.js";import"./Paper-_YJabyrG.js";import"./useTheme-BGnUlXm8.js";import"./useTheme-DydlTTyV.js";import"./index-BCnRmaEi.js";import"./ButtonBase-C2L1o0wR.js";import"./extendSxProp-TWhf26H-.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./utils-DKd4Qyle.js";import"./isMuiElement-3jwTMPyM.js";import"./useSlot-DLE_N_YJ.js";import"./resolveComponentProps-D7_T4EuQ.js";import"./SwitchBase-BPMnquGQ.js";import"./useControlled-CO_jQgkc.js";import"./createSvgIcon-KH78PfbZ.js";import"./createChainedFunction-BO_9K8Jh.js";import"./useId-TBUgTocF.js";function ne(){var h;p(s=>s.questionnaires);const{booklet:d}=p(s=>s.booklets),{user:a}=p(s=>s.app),[x,j]=k.useState([]),b=window.location.pathname.split("/")[3],g=({htmlContent:s})=>t.jsx("div",{dangerouslySetInnerHTML:{__html:s}}),v=(s,i)=>{j(o=>{const n=o.answers||[],e=n.findIndex(r=>r.questionnaire_id===s.id);let l;return e!==-1?l=n.map((r,f)=>f===e?{...r,answer:i,isCorrect:s.answer_key===i}:r):l=[...n,{questionnaire_id:s.id,answer:i,isCorrect:s.answer_key===i}],{...o,answers:l}})};console.log(x);function C(s){u.dispatch(_({...x,user:a,date:w().format("LLLL"),als_level:d.als_level,booklet_id:b})),u.dispatch(y())}return console.log("data",d.als_level),t.jsxs("div",{className:"flex flex-col gap-5",children:[(h=d.examinations)==null?void 0:h.map((s,i)=>t.jsxs(N,{sx:{minWidth:275},children:[t.jsx(A,{children:t.jsx(B,{variant:"body2",children:t.jsxs("div",{className:"flex gap-2 flex-col",children:[t.jsx("div",{className:"text-2xl font-black",children:s.title}),t.jsx("div",{className:"text-xl",children:s.sub_title})]})})}),s.question.map((o,n)=>{var l;let e={};return(l=a==null?void 0:a.score_sheet)!=null&&l.answers&&o.id&&(e=a.score_sheet.answers.find(r=>r.questionnaire_id===o.id)),t.jsxs("div",{className:"px-3",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{children:[o.item_number,"."]}),t.jsx("div",{className:"-mt-4",children:t.jsx(g,{htmlContent:o.question})})]}),o.image_header&&t.jsx(q,{component:"img",height:"full",image:o.image_header,alt:"Question header image"}),t.jsx(L,{children:t.jsx("div",{className:"flex items-start justify-start w-full px-3",children:t.jsx(R,{children:t.jsxs(S,{onChange:r=>v(o,r.target.value),row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"answer_key",children:[t.jsx(m,{value:"A",control:t.jsx(c,{}),label:"A",checked:(e==null?void 0:e.answer)=="A"?!0:void 0,disabled:(e==null?void 0:e.answer)=="A"})," ",t.jsx(m,{value:"B",control:t.jsx(c,{}),label:"B",checked:(e==null?void 0:e.answer)=="B"?!0:void 0,disabled:(e==null?void 0:e.answer)=="B"}),t.jsx(m,{value:"C",control:t.jsx(c,{}),label:"C",checked:(e==null?void 0:e.answer)=="C"?!0:void 0,disabled:(e==null?void 0:e.answer)=="C"}),t.jsx(m,{value:"D",control:t.jsx(c,{}),label:"D",checked:(e==null?void 0:e.answer)=="D"?!0:void 0,disabled:(e==null?void 0:e.answer)=="D"})]})})})})]},n)})]},i)),!a.score_sheet&&t.jsx(D,{onClick:C,variant:"contained",children:"SUBMIT ANSWER"})]})}export{ne as default};
