import{u as h,r as x,s as k,j as e}from"./app-C2mskOMZ.js";import C from"./edit-score-section-BX6qxuKX.js";import{g as w}from"./app-thunk-DQLSyI_H.js";import{P as A}from"./Print-BXnx9483.js";import{C as S}from"./Check-y6BQvXVC.js";import{C as q}from"./Close-DUKNwGV2.js";import"./students-thunk-CjBuW7Kk.js";import"./Button-CBaQs5VU.js";import"./identifier-drSS2CIZ.js";import"./DefaultPropsProvider-Bvd5RBVS.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./ButtonBase-w9OYYi0V.js";import"./Edit-Dv3UHOMC.js";import"./createSvgIcon-DHNO27wi.js";import"./user-service-BwvBB76J.js";function Q(){var p,u;const{student:L,scoresheet:o}=h(i=>i.students),{user:v}=h(i=>i.app),[N,b]=x.useState(0),t=o,a=((p=t==null?void 0:t.booklet)==null?void 0:p.examinations)??[],r=(t==null?void 0:t.answers)||[],g=window.location.pathname.split("/")[4],_=window.location.pathname.split("/")[5],E=new URLSearchParams(window.location.search).get("reference_id");return x.useEffect(()=>{k.dispatch(w())},[]),console.log("scoresheet",o),x.useEffect(()=>{const i=a.reduce((d,n)=>d+n.question.reduce((c,s)=>{const l=r==null?void 0:r.find(m=>m.questionnaire_id===s.id);return c+(parseInt(l==null?void 0:l.score)||0)},0),0);b(i)},[a,r]),e.jsx("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",children:e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-xl p-5 rounded-md border border-gray-300 shadow-lg bg-white",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{children:e.jsxs("a",{href:`/scoresheet/${g}/${_}?reference_id=${E}`,target:"_blank",children:[e.jsx(A,{})," Print"]})}),e.jsx("div",{className:"text-xl font-black text-center",children:"FLT LEARNER SCORESHEETS"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:["Name: ",((u=o==null?void 0:o.user)==null?void 0:u.name)||"N/A"]}),e.jsxs("div",{children:["Date: ",(t==null?void 0:t.date)||"N/A"]})]}),e.jsxs("div",{children:["Overall Score: ",N??"0"]}),e.jsxs("div",{children:["ALS Level: ",(t==null?void 0:t.als_level)??"N/A"]})]}),e.jsx("ol",{className:"list-decimal mt-4 space-y-4",children:a.map((i,d)=>(i.question.reduce((n,c)=>{const s=r.find(l=>l.questionnaire_id===c.id);return n??0+(parseInt((s==null?void 0:s.score)??0)??0)},0),e.jsxs("li",{className:"border border-black p-3 rounded-md",children:[e.jsx("div",{className:"flex items-center justify-between font-semibold",children:e.jsxs("div",{children:[i.title&&e.jsx("div",{children:i.title}),i.sub_title&&e.jsx("div",{children:i.sub_title})]})}),e.jsx("div",{className:"mt-2 space-y-2",children:i.question.map((n,c)=>{var f,j;const s=r.find(y=>y.questionnaire_id===n.id),m=((s==null?void 0:s.score)||0)>0;return e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("span",{className:"font-medium",children:[n.item_number,"."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:(s==null?void 0:s.answer)||"No Answer"}),m?e.jsx(S,{className:"text-green-600","aria-label":"Correct"}):e.jsx(q,{className:"text-red-600","aria-label":"Incorrect"}),((f=s==null?void 0:s.answer)==null?void 0:f.length)!==void 0&&v.user_type=="2"&&((j=s==null?void 0:s.answer)==null?void 0:j.length)!=1&&e.jsxs(e.Fragment,{children:[(s==null?void 0:s.score)??0,e.jsx(C,{data:s})]})]})]},c)})}),e.jsx("div",{className:"font-bold text-right mt-2"})]},d)))})]})})}export{Q as default};
