import{r as o,u as E,j as e,s as j}from"./app-DgTRvG-n.js";import{C as D}from"./Close-52f8-TtF.js";import{R}from"./quill.snow-Cn9AcJ6x.js";import{s as B,g as Q}from"./questionaires-thunk-DHEqBgLJ.js";import{s as L}from"./DefaultPropsProvider-B9zDhP6q.js";import{B as m}from"./Button-BssC8Z_4.js";import{D as A}from"./Dialog-CNmy199N.js";import{T as f}from"./Toolbar-CHNMaIN2.js";import{T as b}from"./Typography-_1uTepA5.js";import{I as G}from"./IconButton-CrZIw2m2.js";import{T as H,F as _}from"./TextField-DzLJwLi_.js";import{C as v}from"./Check-DhNxtXXN.js";import{C as w}from"./CloudUpload-JWyOBpYg.js";import{F as M,a as l,R as O,b as c}from"./RadioGroup-DaZ9GbJ5.js";import{C as U}from"./Checkbox-D8vg8rGA.js";import{F as C,a as W}from"./FormLabel-CQmj1rDc.js";import{I as z,S as K}from"./Select-D7B0-WER.js";import{M as y}from"./MenuItem-CIOjZ9BD.js";import"./createSvgIcon-B7PnOqaZ.js";import"./identifier-BHOpQSpb.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./ButtonBase-DWP_c7OU.js";import"./useTheme-HyQzuqYv.js";import"./useTheme-CkfJYgzp.js";import"./Modal-DmrRy0hr.js";import"./ownerWindow-CO8Ksk3k.js";import"./resolveComponentProps-B77CDhwc.js";import"./useSlot-eOYJtym4.js";import"./utils-4qWl-6qk.js";import"./Paper-Dop62SOz.js";import"./useId-jH-uWcI_.js";import"./index-BCgluba3.js";import"./extendSxProp-BAi_mjMw.js";import"./utils-BPhshtBx.js";import"./SwitchBase-C5YcVhY_.js";import"./useControlled-D3y8Ew8C.js";import"./isMuiElement-NhPrYnSo.js";import"./react-is.production.min-DUDD-a5e.js";import"./index-D7zITs1c.js";import"./Popover-ODMXxZXO.js";import"./isHostComponent-DVu5iVWx.js";import"./debounce-Be36O1Ab.js";import"./Grow-Ba1HGr3R.js";import"./useSlotProps-6SQVwwmm.js";import"./InputBase-D4o4FiaC.js";import"./listItemIconClasses-Ct7KzniT.js";function Ge(){const[k,p]=o.useState(!1),[a,n]=o.useState({}),[t,N]=o.useState({}),[F,r]=o.useState(!1),x=window.location.pathname.split("/")[4],{specifications:I}=E(i=>i.questionnaires),[d,S]=o.useState(!1);console.log("specification",a);const q=()=>{p(!0)},h=()=>{p(!1)};async function T(i){const s=new FormData;s.append("examination_id",x),a.question&&s.append("question",a.question),a.answer_key&&s.append("answer_key",a.answer_key),a.specification&&s.append("specification",a.specification),a.a&&s.append("a",a.a),a.b&&s.append("b",a.b),a.c&&s.append("c",a.c),a.d&&s.append("d",a.d),s.append("e",a.e),s.append("title",a.title),s.append("item_number",a.item_number),s.append("image_a",a.image_a),s.append("image_b",a.image_b),s.append("image_c",a.image_c),s.append("image_d",a.image_d),s.append("image_e",a.image_e),s.append("image_header",a.image_header),s.append("isEssay",d);try{r(!0);const u=await j.dispatch(B(s));u.status==200?(await j.dispatch(Q(x)),n({}),r(!1),p(!1)):(r(!1),N(u.response.data.errors)),console.log("datass",a)}catch{r(!1)}}const g=L("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});return e.jsxs(o.Fragment,{children:[e.jsx(m,{variant:"outlined",onClick:q,children:"Create Questionnaire"}),e.jsxs(A,{fullWidth:!0,open:k,onClose:h,children:[e.jsxs(f,{className:"flex items-center justify-end",children:[e.jsx(b,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Create Questionnaire"}),e.jsx(G,{edge:"start",color:"inherit",onClick:h,"aria-label":"close",children:e.jsx(D,{})})]}),e.jsxs(f,{className:"flex-col gap-3 flex items-start justify-start w-full",children:[e.jsxs("div",{className:"w-full flex gap-4 flex-col",children:[e.jsx(H,{onChange:i=>n({...a,[i.target.name]:i.target.value}),error:!!(t!=null&&t.item_number),helperText:(t==null?void 0:t.item_number)??"",name:"item_number",type:"number",id:"outlined-basic",label:"Item Number",variant:"outlined",className:"w-full"}),e.jsxs(m,{component:"label",role:void 0,variant:"contained",startIcon:a!=null&&a.image_header?e.jsx(v,{}):e.jsx(w,{}),children:[a!=null&&a.image_header?a==null?void 0:a.image_header.name:"Upload files",e.jsx(g,{name:"image_header",type:"file",onChange:i=>n({...a,[i.target.name]:i.target.files[0]}),accept:"image/*"})]}),e.jsx(M,{onChange:i=>S(i.target.checked),children:e.jsx(l,{checked:d,control:e.jsx(U,{}),label:"Is Essay?"})}),e.jsxs("div",{className:"bg-white ",children:[(t==null?void 0:t.question)&&e.jsx("div",{className:"text-red-600",children:t==null?void 0:t.question}),e.jsx("div",{className:"text-black p-3 font-black",children:"Questions"}),e.jsx(R,{theme:"snow",className:"text-black  h-52",onChange:i=>n({...a,question:i})})]})]}),!d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-start justify-start w-full mt-12",children:e.jsxs(C,{error:!!(t!=null&&t.answer_key),children:[e.jsx(W,{id:"demo-row-radio-buttons-group-label",children:"Answer Key"}),e.jsxs(O,{onChange:i=>n({...a,[i.target.name]:i.target.value}),row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"answer_key",children:[e.jsx("div",{children:e.jsx(l,{value:"A",control:e.jsx(c,{}),label:"A"})}),e.jsx(l,{value:"B",control:e.jsx(c,{}),label:"B"}),e.jsx(l,{value:"C",control:e.jsx(c,{}),label:"C"}),e.jsx(l,{value:"D",control:e.jsx(c,{}),label:"D"})]}),(t==null?void 0:t.answer_key)&&e.jsx(_,{children:t.answer_key})]})}),e.jsx("div",{className:"flex gap-3 w-full",children:e.jsx(m,{component:"label",role:void 0,variant:"contained",className:"w-full",size:"large",startIcon:a!=null&&a.image_a?e.jsx(v,{}):e.jsx(w,{}),children:e.jsx(g,{name:"image_a",type:"file",onChange:i=>n({...a,[i.target.name]:i.target.files[0]}),accept:"image/*"})})}),e.jsxs(C,{className:"mt-12",fullWidth:!0,error:!!(t!=null&&t.specification),children:[e.jsx(z,{id:"demo-simple-select-label",children:"Specification"}),e.jsxs(K,{labelId:"demo-simple-select-label",id:"demo-simple-select",name:"specification",label:"Specification",onChange:i=>n({...a,[i.target.name]:i.target.value}),value:a.specification??"",children:[e.jsx(y,{selected:!0,disabled:!0}),I.data.map((i,s)=>e.jsx(y,{value:i.specification,children:i.specification},s))]}),(t==null?void 0:t.specification)&&e.jsx(_,{children:t.specification})]})]}),e.jsx("div",{className:"mt-6 flex w-full items-end justify-end",children:e.jsxs(f,{children:[e.jsx(b,{sx:{ml:2,flex:1},variant:"h6",component:"div"}),e.jsx(m,{disabled:F,variant:"contained",autoFocus:!0,onClick:T,children:"save"})]})})]})]})]})}export{Ge as default};
