import{u as h,r as x,s as y,j as e}from"./app-V3uMjDlE.js";import k from"./edit-score-section-Dr8xSYB1.js";import{g as C}from"./app-thunk-BMqIBt_G.js";import{P as A}from"./Print-BiHoy3ta.js";import{C as q}from"./Check-BryS8KlT.js";import{C as S}from"./Close-glSIAVCH.js";import"./students-thunk-C08T9KTS.js";import"./Button-gSx5SkWA.js";import"./identifier-DcU_KgkY.js";import"./DefaultPropsProvider-Ds44ox4d.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./ButtonBase-DKRppHdc.js";import"./Edit-CjhUTZBs.js";import"./createSvgIcon-DXAUpAwC.js";import"./user-service-DFZgwggl.js";function M(){var p,u;const{student:I,scoresheet:o}=h(i=>i.students),{user:v}=h(i=>i.app),[N,b]=x.useState(0),t=o,a=((p=t==null?void 0:t.booklet)==null?void 0:p.examinations)??[],r=(t==null?void 0:t.answers)||[],g=window.location.pathname.split("/")[4],_=window.location.pathname.split("/")[5];return x.useEffect(()=>{y.dispatch(C())},[]),console.log("scoresheet",o),x.useEffect(()=>{const i=a.reduce((d,l)=>d+l.question.reduce((c,s)=>{const n=r==null?void 0:r.find(m=>m.questionnaire_id===s.id);return c+(parseInt(n==null?void 0:n.score)||0)},0),0);b(i)},[a,r]),e.jsx("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",children:e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-xl p-5 rounded-md border border-gray-300 shadow-lg bg-white",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{children:e.jsxs("a",{href:`/scoresheet/${g}/${_}`,target:"_blank",children:[e.jsx(A,{})," Print"]})}),e.jsx("div",{className:"text-xl font-black text-center",children:"FLT LEARNER SCORESHEETS"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:["Name: ",((u=o==null?void 0:o.user)==null?void 0:u.name)||"N/A"]}),e.jsxs("div",{children:["Date: ",(t==null?void 0:t.date)||"N/A"]})]}),e.jsxs("div",{children:["Overall Score: ",N??"0"]}),e.jsxs("div",{children:["ALS Level: ",(t==null?void 0:t.als_level)??"N/A"]})]}),e.jsx("ol",{className:"list-decimal mt-4 space-y-4",children:a.map((i,d)=>(i.question.reduce((l,c)=>{const s=r.find(n=>n.questionnaire_id===c.id);return l??0+(parseInt((s==null?void 0:s.score)??0)??0)},0),e.jsxs("li",{className:"border border-black p-3 rounded-md",children:[e.jsx("div",{className:"flex items-center justify-between font-semibold",children:e.jsxs("div",{children:[i.title&&e.jsx("div",{children:i.title}),i.sub_title&&e.jsx("div",{children:i.sub_title})]})}),e.jsx("div",{className:"mt-2 space-y-2",children:i.question.map((l,c)=>{var f,j;const s=r.find(E=>E.questionnaire_id===l.id),m=((s==null?void 0:s.score)||0)>0;return e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("span",{className:"font-medium",children:[l.item_number,"."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:(s==null?void 0:s.answer)||"No Answer"}),m?e.jsx(q,{className:"text-green-600","aria-label":"Correct"}):e.jsx(S,{className:"text-red-600","aria-label":"Incorrect"}),((f=s==null?void 0:s.answer)==null?void 0:f.length)!==void 0&&v.user_type=="2"&&((j=s==null?void 0:s.answer)==null?void 0:j.length)!=1&&e.jsxs(e.Fragment,{children:[(s==null?void 0:s.score)??0,e.jsx(k,{data:s})]})]})]},c)})}),e.jsx("div",{className:"font-bold text-right mt-2"})]},d)))})]})})}export{M as default};
