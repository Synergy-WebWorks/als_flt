import{u as h,r as x,s as _,j as e}from"./app-DtPgCWG3.js";import E from"./edit-score-section-CiApXbTl.js";import{g as y}from"./app-thunk-BI7oYHXi.js";import{C}from"./Check-ByX7zZY6.js";import{C as A}from"./Close-BTHLMnpL.js";import"./students-thunk-a_tNaOG7.js";import"./Button-oOClEB5G.js";import"./identifier-D406CKjG.js";import"./DefaultPropsProvider-B3MJOVUH.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./ButtonBase-DC94FX1V.js";import"./Edit-DUckqwyU.js";import"./createSvgIcon-CSJoG0z3.js";import"./user-service-DOf-fNIW.js";function K(){var u,p;const{student:k,scoresheet:c}=h(i=>i.students),{user:v}=h(i=>i.app),[N,b]=x.useState(0),t=c,d=((u=t==null?void 0:t.booklet)==null?void 0:u.examinations)??[],r=(t==null?void 0:t.answers)||[];return x.useEffect(()=>{_.dispatch(y())},[]),console.log("scoresheet",c),x.useEffect(()=>{const i=d.reduce((a,l)=>a+l.question.reduce((o,s)=>{const n=r==null?void 0:r.find(m=>m.questionnaire_id===s.id);return o+(parseInt(n==null?void 0:n.score)||0)},0),0);b(i)},[d,r]),e.jsx("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",children:e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-xl p-5 rounded-md border border-gray-300 shadow-lg bg-white",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-xl font-black text-center",children:"FLT LEARNER SCORESHEETS"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:["Name: ",((p=c==null?void 0:c.user)==null?void 0:p.name)||"N/A"]}),e.jsxs("div",{children:["Date: ",(t==null?void 0:t.date)||"N/A"]})]}),e.jsxs("div",{children:["Overall Score: ",N??"0"]}),e.jsxs("div",{children:["ALS Level: ",(t==null?void 0:t.als_level)??"N/A"]})]}),e.jsx("ol",{className:"list-decimal mt-4 space-y-4",children:d.map((i,a)=>(i.question.reduce((l,o)=>{const s=r.find(n=>n.questionnaire_id===o.id);return l??0+(parseInt((s==null?void 0:s.score)??0)??0)},0),e.jsxs("li",{className:"border border-black p-3 rounded-md",children:[e.jsx("div",{className:"flex items-center justify-between font-semibold",children:e.jsxs("div",{children:[i.title&&e.jsx("div",{children:i.title}),i.sub_title&&e.jsx("div",{children:i.sub_title})]})}),e.jsx("div",{className:"mt-2 space-y-2",children:i.question.map((l,o)=>{var f,j;const s=r.find(g=>g.questionnaire_id===l.id),m=((s==null?void 0:s.score)||0)>0;return e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("span",{className:"font-medium",children:[l.item_number,"."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:(s==null?void 0:s.answer)||"No Answer"}),m?e.jsx(C,{className:"text-green-600","aria-label":"Correct"}):e.jsx(A,{className:"text-red-600","aria-label":"Incorrect"}),((f=s==null?void 0:s.answer)==null?void 0:f.length)!==void 0&&v.user_type=="2"&&((j=s==null?void 0:s.answer)==null?void 0:j.length)!=1&&e.jsxs(e.Fragment,{children:[(s==null?void 0:s.score)??0,e.jsx(E,{data:s})]})]})]},o)})}),e.jsx("div",{className:"font-bold text-right mt-2"})]},a)))})]})})}export{K as default};
