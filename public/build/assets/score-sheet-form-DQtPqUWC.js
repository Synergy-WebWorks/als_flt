import{u as h,r as x,s as E,j as e}from"./app-4jOJPXNo.js";import y from"./edit-score-section-hkI_7SLh.js";import{g as C}from"./app-thunk-CFEWjZRg.js";import{C as S}from"./Check--q5Z63cd.js";import{C as A}from"./Close-CRC35aGz.js";import"./students-thunk-C0SaGLKc.js";import"./Button-CIjrWzB0.js";import"./identifier-dCR3X07u.js";import"./DefaultPropsProvider-CuuTHmMC.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./ButtonBase-DKqVK4SH.js";import"./Edit-Cv6QTyRq.js";import"./createSvgIcon-2Ou8FEDv.js";import"./user-service-C5HXzn2y.js";function M(){var u,p;const{student:k,scoresheet:n}=h(r=>r.students),{user:v}=h(r=>r.app),[N,b]=x.useState(0),t=n,a=((u=t==null?void 0:t.booklet)==null?void 0:u.examinations)??[],i=(t==null?void 0:t.answers)||[];return x.useEffect(()=>{E.dispatch(C())},[]),console.log("scoresheet",n),x.useEffect(()=>{const r=a.reduce((d,m)=>d+m.question.reduce((l,c)=>{const s=i==null?void 0:i.find(o=>o.questionnaire_id===c.id);return l+(parseInt(s==null?void 0:s.score)||0)},0),0);b(r)},[a,i]),e.jsx("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",children:e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-xl p-5 rounded-md border border-gray-300 shadow-lg bg-white",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-xl font-black text-center",children:"FLT LEARNER SCORESHEETS"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:["Name: ",((p=n==null?void 0:n.user)==null?void 0:p.name)||"N/A"]}),e.jsxs("div",{children:["Date: ",(t==null?void 0:t.date)||"N/A"]})]}),e.jsxs("div",{children:["Overall Score: ",N??"0"]}),e.jsxs("div",{children:["ALS Level: ",(t==null?void 0:t.als_level)??"N/A"]})]}),e.jsx("ol",{className:"list-decimal mt-4 space-y-4",children:a.map((r,d)=>{const m=r.question.reduce((l,c)=>{const s=i.find(o=>o.questionnaire_id===c.id);return l??0+(parseInt((s==null?void 0:s.score)??0)??0)},0);return e.jsxs("li",{className:"border border-black p-3 rounded-md",children:[e.jsx("div",{className:"flex items-center justify-between font-semibold",children:e.jsxs("div",{children:[r.title&&e.jsx("div",{children:r.title}),r.sub_title&&e.jsx("div",{children:r.sub_title})]})}),e.jsx("div",{className:"mt-2 space-y-2",children:r.question.map((l,c)=>{var f,j;const s=i.find(_=>_.questionnaire_id===l.id),g=((s==null?void 0:s.score)||0)>0;return e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("span",{className:"font-medium",children:[l.item_number,"."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:(s==null?void 0:s.answer)||"No Answer"}),g?e.jsx(S,{className:"text-green-600","aria-label":"Correct"}):e.jsx(A,{className:"text-red-600","aria-label":"Incorrect"}),((f=s==null?void 0:s.answer)==null?void 0:f.length)!==void 0&&v.user_type=="2"&&((j=s==null?void 0:s.answer)==null?void 0:j.length)!=1&&e.jsxs(e.Fragment,{children:[(s==null?void 0:s.score)??0,e.jsx(y,{data:s})]})]})]},c)})}),e.jsxs("div",{className:"font-bold text-right mt-2",children:["Score: ",parseInt(m)]})]},d)})})]})})}export{M as default};
